<!doctype html>
<html lang="vi">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Äáº¿m NgÆ°á»£c Thi THPT Quá»‘c Gia 2025</title>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      height: 100%;
      overflow-x: hidden;
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
    }
    
    html {
      height: 100%;
      scroll-behavior: smooth;
    }

    /* Theme Variables */
    :root {
      --bg-start: #111315;
      --bg-end: #1D2125;
      --accent: #9CA3AF;
      --secondary: #D1D5DB;
      --text: #E5E7EB;
      --text-dim: #9CA3AF;
      --glow: rgba(156, 163, 175, 0.3);
    }

    .theme-emerald {
      --bg-start: #0F2222;
      --bg-end: #183C3C;
      --accent: #6EE7B7;
      --secondary: #A7F3D0;
      --text: #E6F2E6;
      --text-dim: #A7F3D0;
      --glow: rgba(110, 231, 183, 0.3);
    }

    .theme-slate {
      --bg-start: #111315;
      --bg-end: #1D2125;
      --accent: #9CA3AF;
      --secondary: #D1D5DB;
      --text: #E5E7EB;
      --text-dim: #9CA3AF;
      --glow: rgba(156, 163, 175, 0.3);
    }

    .theme-rose {
      --bg-start: #1F0A1A;
      --bg-end: #2D1B2E;
      --accent: #F472B6;
      --secondary: #FBBF24;
      --text: #FDF2F8;
      --text-dim: #F9A8D4;
      --glow: rgba(244, 114, 182, 0.3);
    }

    .theme-brown {
      --bg-start: #1C1410;
      --bg-end: #2A1F1A;
      --accent: #D97706;
      --secondary: #F59E0B;
      --text: #FEF3E2;
      --text-dim: #FCD34D;
      --glow: rgba(217, 119, 6, 0.3);
    }

    .theme-deep {
      --bg-start: #0D1117;
      --bg-end: #1A2332;
      --accent: #00B4D8;
      --secondary: #0077B6;
      --text: #E1F5FE;
      --text-dim: #81D4FA;
      --glow: rgba(0, 180, 216, 0.3);
    }

    /* Animated Background */
    .animated-bg {
      background: linear-gradient(135deg, var(--bg-start) 0%, var(--bg-end) 100%);
      background-size: 400% 400%;
      animation: gradientShift 15s ease-in-out infinite;
      min-height: 100%;
      position: relative;
      overflow: hidden;
      transition: background 1.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    /* Floating particles */
    .particles {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .particle {
      position: absolute;
      width: 2px;
      height: 2px;
      background: var(--accent);
      border-radius: 50%;
      opacity: 0.6;
      animation: float 20s linear infinite;
    }

    @keyframes float {
      0% {
        transform: translateY(100vh) translateX(0px);
        opacity: 0;
      }
      10% {
        opacity: 0.6;
      }
      90% {
        opacity: 0.6;
      }
      100% {
        transform: translateY(-100px) translateX(100px);
        opacity: 0;
      }
    }

    /* Glass morphism */
    .glass {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 24px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      transition: all 1.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Hero Section */
    .hero-section {
      min-height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 2rem;
      position: relative;
      z-index: 2;
    }

    .hero-title {
      font-size: clamp(2rem, 5vw, 4rem);
      font-weight: 800;
      color: var(--text);
      margin-bottom: 1rem;
      margin-top: 4rem;
      text-shadow: 0 0 30px var(--glow);
      animation: fadeInUp 2.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      letter-spacing: 2px;
      line-height: 1.2;
      transition: color 1.5s cubic-bezier(0.4, 0, 0.2, 1), text-shadow 1.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .hero-subtitle {
      font-size: clamp(1rem, 2.5vw, 1.5rem);
      color: var(--text-dim);
      margin-bottom: 3rem;
      animation: fadeInUp 2.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.8s both;
      font-weight: 300;
    }

    /* Countdown */
    .countdown-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 2.5rem;
      max-width: 800px;
      width: 100%;
      animation: slideInScale 2.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) 1.2s both;
    }

    .countdown-box {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 24px;
      padding: 2.5rem 1.5rem;
      text-align: center;
      transition: all 1.2s cubic-bezier(0.23, 1, 0.32, 1);
      position: relative;
      overflow: hidden;
      opacity: 0;
      transform: translateY(60px) scale(0.8);
      animation: countdownBoxIn 1.8s cubic-bezier(0.23, 1, 0.32, 1) forwards;
    }

    .countdown-box:nth-child(1) { animation-delay: 1.6s; }
    .countdown-box:nth-child(2) { animation-delay: 1.8s; }
    .countdown-box:nth-child(3) { animation-delay: 2.0s; }
    .countdown-box:nth-child(4) { animation-delay: 2.2s; }

    .countdown-box:hover {
      transform: translateY(-15px) scale(1.05);
      box-shadow: 0 40px 100px var(--glow);
      border-color: var(--accent);
    }

    .countdown-box:hover .countdown-number {
      transform: scale(1.1);
      text-shadow: 0 0 30px var(--glow), 0 0 50px var(--accent);
      color: var(--secondary);
    }

    .countdown-box:hover .countdown-label {
      color: var(--accent);
      transform: translateY(-2px);
    }

    .countdown-box::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transition: left 0.8s ease;
    }

    .countdown-box:hover::before {
      left: 100%;
    }

    .countdown-number {
      font-size: 3.5rem;
      font-weight: 700;
      color: var(--accent);
      line-height: 1;
      margin-bottom: 0.8rem;
      text-shadow: 0 0 20px var(--glow);
      transition: all 1.5s cubic-bezier(0.4, 0, 0.2, 1), color 1.5s cubic-bezier(0.4, 0, 0.2, 1), text-shadow 1.5s cubic-bezier(0.4, 0, 0.2, 1);
      transform-style: preserve-3d;
      perspective: 1000px;
      position: relative;
      display: inline-block;
    }

    .countdown-number::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      opacity: 0;
      transition: opacity 0.3s ease;
      border-radius: 8px;
    }

    .countdown-number:hover::before {
      opacity: 1;
    }

    .countdown-label {
      font-size: 1.1rem;
      color: var(--text-dim);
      text-transform: uppercase;
      letter-spacing: 1.5px;
      font-weight: 500;
    }

    /* Section spacing */
    .section {
      padding: 5rem 2rem;
      position: relative;
      z-index: 2;
    }

    .section-title {
      font-size: clamp(1.5rem, 3vw, 2.5rem);
      font-weight: 700;
      color: var(--text);
      text-align: center;
      margin-bottom: 3rem;
      text-shadow: 0 0 20px var(--glow);
      letter-spacing: 1px;
    }

    /* Form Section */
    .form-container {
      max-width: 600px;
      margin: 0 auto;
    }

    .form-group {
      margin-bottom: 2rem;
    }

    .form-label {
      display: block;
      color: var(--text);
      font-weight: 500;
      margin-bottom: 0.5rem;
      font-size: 1rem;
    }

    .form-input, .form-textarea {
      width: 100%;
      padding: 1rem 1.5rem;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      color: var(--text);
      font-size: 1rem;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .form-input:focus, .form-textarea:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 20px var(--glow);
      background: rgba(255, 255, 255, 0.08);
    }

    .form-input::placeholder, .form-textarea::placeholder {
      color: var(--text-dim);
    }

    .submit-btn {
      width: 100%;
      padding: 1rem 2rem;
      background: linear-gradient(135deg, var(--accent), var(--secondary));
      border: none;
      border-radius: 12px;
      color: white;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
      position: relative;
      overflow: hidden;
    }

    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 40px var(--glow);
    }

    .submit-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    /* Messages Display */
    .messages-container {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      padding: 0 1rem;
      position: relative;
    }

    .message-card {
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      padding: 1.5rem;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      animation: floatIn 0.8s ease-out, gentleFloat 6s ease-in-out infinite;
      position: relative;
      overflow: hidden;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      transform-origin: center;
    }

    .message-card::before {
      content: 'ğŸ’¬';
      position: absolute;
      top: 1rem;
      right: 1rem;
      font-size: 1.2rem;
      opacity: 0.6;
    }

    .message-card:hover {
      transform: translateY(-12px) scale(1.02);
      border-color: var(--accent);
      box-shadow: 0 30px 80px var(--glow);
      background: rgba(255, 255, 255, 0.06);
    }

    .message-card:nth-child(odd) {
      animation-delay: 0.1s, 0s;
    }

    .message-card:nth-child(even) {
      animation-delay: 0.2s, 2s;
    }

    .message-card:nth-child(3n) {
      animation-delay: 0.3s, 4s;
    }

    .message-text {
      color: var(--text);
      font-size: 1.1rem;
      line-height: 1.7;
      margin-bottom: 1.5rem;
      font-style: italic;
      position: relative;
      padding: 0.5rem 1rem;
      margin: 0.5rem 0 1.5rem 0;
    }

    .message-text::before {
      content: '"';
      font-size: 2rem;
      color: var(--accent);
      position: absolute;
      top: -0.3rem;
      left: -0.8rem;
      opacity: 0.7;
      z-index: -1;
    }

    .message-text::after {
      content: '"';
      font-size: 2rem;
      color: var(--accent);
      position: absolute;
      bottom: -0.8rem;
      right: -0.3rem;
      opacity: 0.7;
      z-index: -1;
    }

    .message-author {
      color: var(--accent);
      font-weight: 600;
      font-size: 0.95rem;
    }

    .message-time {
      color: var(--text-dim);
      font-size: 0.8rem;
      margin-left: 1rem;
    }

    /* Class Logo Section */
    .class-logo-section {
      position: absolute;
      top: 0.5rem;
      left: 0.5rem;
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 12px;
      padding: 0.4rem 0.6rem;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
      animation: slideInFromLeft 1.5s cubic-bezier(0.23, 1, 0.32, 1) 0.5s both;
    }

    .class-logo-section:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 40px var(--glow);
      border-color: var(--accent);
    }

    .class-logo {
      display: flex;
      align-items: center;
      justify-content: center;
      animation: scaleIn 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275) 1s both;
    }

    .class-logo svg {
      filter: drop-shadow(0 0 10px var(--glow));
      transition: all 0.3s ease;
    }

    .class-logo-section:hover .class-logo svg {
      transform: scale(1.1) rotate(5deg);
      filter: drop-shadow(0 0 20px var(--glow));
    }

    .class-info {
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
      animation: slideInFromLeft 1.3s cubic-bezier(0.23, 1, 0.32, 1) 1.2s both;
    }

    .class-name {
      color: var(--accent);
      font-size: 0.8rem;
      font-weight: 700;
      margin: 0;
      text-shadow: 0 0 10px var(--glow);
      letter-spacing: 0.5px;
    }

    /* Theme Switcher */
    .theme-switcher {
      position: fixed;
      top: 1rem;
      right: 1rem;
      z-index: 1000;
      display: flex;
      gap: 0.3rem;
    }

    .theme-btn {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      border: 1.5px solid rgba(255, 255, 255, 0.3);
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .theme-btn:hover {
      transform: scale(1.1);
      border-color: white;
    }

    .theme-btn.active {
      border-color: var(--accent);
      box-shadow: 0 0 20px var(--glow);
    }

    .theme-deep { background: linear-gradient(135deg, #0D1117, #00B4D8); }
    .theme-emerald-btn { background: linear-gradient(135deg, #0F2222, #6EE7B7); }
    .theme-slate-btn { background: linear-gradient(135deg, #111315, #9CA3AF); }
    .theme-rose-btn { background: linear-gradient(135deg, #1F0A1A, #F472B6); }
    .theme-brown-btn { background: linear-gradient(135deg, #1C1410, #D97706); }

    /* Scroll Animations */
    .scroll-reveal {
      opacity: 0;
      transform: translateY(80px);
      transition: all 1.6s cubic-bezier(0.23, 1, 0.32, 1);
    }

    .scroll-reveal.revealed {
      opacity: 1;
      transform: translateY(0);
    }

    .scroll-reveal-left {
      opacity: 0;
      transform: translateX(-80px) rotate(-5deg);
      transition: all 1.4s cubic-bezier(0.23, 1, 0.32, 1);
    }

    .scroll-reveal-left.revealed {
      opacity: 1;
      transform: translateX(0) rotate(0deg);
    }

    .scroll-reveal-right {
      opacity: 0;
      transform: translateX(80px) rotate(5deg);
      transition: all 1.4s cubic-bezier(0.23, 1, 0.32, 1);
    }

    .scroll-reveal-right.revealed {
      opacity: 1;
      transform: translateX(0) rotate(0deg);
    }

    .scroll-reveal-scale {
      opacity: 0;
      transform: scale(0.6) rotate(10deg);
      transition: all 1.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .scroll-reveal-scale.revealed {
      opacity: 1;
      transform: scale(1) rotate(0deg);
    }

    .scroll-reveal-fade {
      opacity: 0;
      transition: opacity 2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    .scroll-reveal-fade.revealed {
      opacity: 1;
    }

    /* Stagger animation delays */
    .scroll-reveal:nth-child(1) { transition-delay: 0.2s; }
    .scroll-reveal:nth-child(2) { transition-delay: 0.4s; }
    .scroll-reveal:nth-child(3) { transition-delay: 0.6s; }
    .scroll-reveal:nth-child(4) { transition-delay: 0.8s; }
    .scroll-reveal:nth-child(5) { transition-delay: 1.0s; }
    .scroll-reveal:nth-child(6) { transition-delay: 1.2s; }

    /* Animations */
    @keyframes fadeInUp {
      0% {
        opacity: 0;
        transform: translateY(60px) scale(0.95);
      }
      50% {
        opacity: 0.7;
        transform: translateY(-10px) scale(1.02);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    @keyframes slideInScale {
      0% {
        opacity: 0;
        transform: translateY(100px) scale(0.8);
      }
      60% {
        opacity: 0.8;
        transform: translateY(-20px) scale(1.05);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    @keyframes countdownBoxIn {
      0% {
        opacity: 0;
        transform: translateY(60px) scale(0.8) rotateX(45deg);
      }
      50% {
        opacity: 0.7;
        transform: translateY(-10px) scale(1.05) rotateX(-5deg);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1) rotateX(0deg);
      }
    }

    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes floatIn {
      0% {
        opacity: 0;
        transform: translateY(50px) scale(0.85) rotate(8deg);
      }
      30% {
        opacity: 0.4;
        transform: translateY(20px) scale(0.95) rotate(-2deg);
      }
      70% {
        opacity: 0.8;
        transform: translateY(-8px) scale(1.03) rotate(1deg);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1) rotate(0deg);
      }
    }

    @keyframes gentleFloat {
      0%, 100% {
        transform: translateY(0px) rotate(0deg) scale(1);
      }
      25% {
        transform: translateY(-12px) rotate(0.8deg) scale(1.01);
      }
      50% {
        transform: translateY(-6px) rotate(0deg) scale(1.005);
      }
      75% {
        transform: translateY(-18px) rotate(-0.8deg) scale(1.01);
      }
    }

    @keyframes slideInFromLeft {
      from {
        opacity: 0;
        transform: translateX(-100px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes slideInFromRight {
      from {
        opacity: 0;
        transform: translateX(100px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes scaleIn {
      from {
        opacity: 0;
        transform: scale(0.5);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes numberFlip {
      0% { 
        transform: rotateX(0deg) scale(1);
        opacity: 1;
      }
      25% {
        transform: rotateX(-45deg) scale(0.95);
        opacity: 0.8;
      }
      50% { 
        transform: rotateX(-90deg) scale(0.9);
        opacity: 0.6;
      }
      75% {
        transform: rotateX(-45deg) scale(0.95);
        opacity: 0.8;
      }
      100% { 
        transform: rotateX(0deg) scale(1);
        opacity: 1;
      }
    }

    @keyframes numberGlow {
      0%, 100% {
        text-shadow: 0 0 20px var(--glow);
      }
      50% {
        text-shadow: 0 0 40px var(--glow), 0 0 60px var(--accent);
      }
    }

    @keyframes numberPulse {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
    }

    .number-flip {
      animation: numberFlip 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .number-glow {
      animation: numberGlow 2s ease-in-out infinite;
    }

    .number-pulse {
      animation: numberPulse 1.5s ease-in-out infinite;
    }

    /* Checkbox Styling */
    .checkbox-container {
      display: flex;
      align-items: center;
      cursor: pointer;
      user-select: none;
      margin-bottom: 0;
    }

    .checkbox-input {
      display: none;
    }

    .checkbox-custom {
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 6px;
      margin-right: 12px;
      position: relative;
      transition: all 0.3s ease;
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
    }

    .checkbox-custom::after {
      content: 'âœ“';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      color: white;
      font-size: 12px;
      font-weight: bold;
      transition: transform 0.2s ease;
    }

    .checkbox-input:checked + .checkbox-custom {
      border-color: var(--accent);
      background: var(--accent);
      box-shadow: 0 0 15px var(--glow);
    }

    .checkbox-input:checked + .checkbox-custom::after {
      transform: translate(-50%, -50%) scale(1);
    }

    .checkbox-label {
      color: var(--text);
      font-size: 0.95rem;
      font-weight: 500;
    }

    .checkbox-container:hover .checkbox-custom {
      border-color: var(--accent);
      transform: scale(1.05);
    }

    /* Form shake animation */
    @keyframes formShake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }

    .form-shake {
      animation: formShake 0.5s ease-in-out;
    }

    /* Success message */
    .success-message {
      text-align: center;
      color: var(--secondary);
      font-size: 1.2rem;
      font-weight: 600;
      padding: 2rem;
      opacity: 0;
      transform: scale(0.8);
      transition: all 0.6s ease;
    }

    .success-message.show {
      opacity: 1;
      transform: scale(1);
    }

    /* Shine effect for button */
    .submit-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.8s ease;
    }

    .submit-btn:hover::before {
      left: 100%;
    }

    /* Loading states */
    .loading {
      opacity: 0.6;
      pointer-events: none;
    }

    .spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Admin Panel Styles */
    .admin-btn {
      padding: 0.6rem 1.2rem;
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 10px;
      color: var(--text);
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .admin-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: var(--accent);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px var(--glow);
    }

    .admin-btn.active {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }

    .export-btn {
      background: linear-gradient(135deg, #10B981, #059669);
      border-color: #10B981;
      color: white;
    }

    .export-btn:hover {
      background: linear-gradient(135deg, #059669, #047857);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
    }

    .admin-panel {
      border: 1px solid rgba(255, 255, 255, 0.15);
      animation: slideDown 0.3s ease-out;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .admin-action-btn {
      padding: 0.5rem 1rem;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 8px;
      color: var(--text);
      font-size: 0.85rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(8px);
    }

    .admin-action-btn:hover {
      background: rgba(255, 255, 255, 0.1);
      border-color: var(--accent);
      transform: translateY(-1px);
    }

    .admin-action-btn.delete-btn {
      background: rgba(239, 68, 68, 0.1);
      border-color: rgba(239, 68, 68, 0.3);
      color: #FCA5A5;
    }

    .admin-action-btn.delete-btn:hover {
      background: rgba(239, 68, 68, 0.2);
      border-color: #EF4444;
      color: #FEE2E2;
    }

    .admin-action-btn.export-btn {
      background: rgba(16, 185, 129, 0.1);
      border-color: rgba(16, 185, 129, 0.3);
      color: #6EE7B7;
    }
    /* Message Particles */
    .message-particles {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .message-particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: var(--accent);
      border-radius: 50%;
      opacity: 0.4;
      animation: messageFloat 15s linear infinite;
    }

    .message-particle.circle::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      width: 8px;
      height: 8px;
      background: var(--accent);
      border-radius: 50%;
      opacity: 0.8;
    }

    .message-particle.square::before {
      content: '';
      position: absolute;
      top: -1px;
      left: -1px;
      width: 6px;
      height: 6px;
      background: var(--secondary);
      border-radius: 2px;
      opacity: 0.6;
      transform: rotate(45deg);
    }

    .message-particle.diamond::before {
      content: '';
      position: absolute;
      top: -3px;
      left: -3px;
      width: 10px;
      height: 10px;
      background: linear-gradient(45deg, var(--accent), var(--secondary));
      border-radius: 2px;
      opacity: 0.7;
      transform: rotate(45deg);
    }

    @keyframes messageFloat {
      0% {
        transform: translateY(100%) translateX(0px) rotate(0deg);
        opacity: 0;
      }
      15% {
        opacity: 0.8;
      }
      85% {
        opacity: 0.8;
      }
      100% {
        transform: translateY(-300px) translateX(80px) rotate(720deg);
        opacity: 0;
      }
    }

    .admin-action-btn.export-btn:hover {
      background: rgba(16, 185, 129, 0.2);
      border-color: #10B981;
      color: #D1FAE5;
    }

    /* Message Card Admin Mode */
    .message-card.admin-mode {
      position: relative;
      cursor: pointer;
      user-select: none;
    }

    .message-card.admin-mode::before {
      content: '';
      position: absolute;
      top: 0.5rem;
      left: 0.5rem;
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 4px;
      background: rgba(255, 255, 255, 0.05);
      transition: all 0.3s ease;
      z-index: 10;
    }

    .message-card.admin-mode.selected::before {
      background: var(--accent);
      border-color: var(--accent);
    }

    .message-card.admin-mode.selected::after {
      content: 'âœ“';
      position: absolute;
      top: 0.7rem;
      left: 0.7rem;
      color: white;
      font-size: 12px;
      font-weight: bold;
      z-index: 11;
    }

    .message-card.admin-mode.selected {
      border-color: var(--accent);
      box-shadow: 0 0 20px var(--glow);
      background: rgba(255, 255, 255, 0.08);
    }

    .message-card.admin-mode:hover::before {
      border-color: var(--accent);
      transform: scale(1.1);
    }

    .message-card.admin-mode .message-text,
    .message-card.admin-mode .message-author,
    .message-card.admin-mode .message-time {
      margin-left: 2rem;
    }

    /* Delete confirmation */
    .delete-confirmation {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      backdrop-filter: blur(10px);
    }

    .delete-modal {
      background: var(--bg-end);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 16px;
      padding: 2rem;
      max-width: 450px;
      width: 90%;
      text-align: center;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    }

    .delete-modal h3 {
      color: #EF4444;
      margin-bottom: 1rem;
      font-size: 1.3rem;
    }

    .delete-modal p {
      color: var(--text);
      margin-bottom: 1.5rem;
      line-height: 1.6;
    }

    .password-input-group {
      margin-bottom: 2rem;
      text-align: left;
    }

    .password-input-group label {
      display: block;
      color: var(--text);
      font-weight: 500;
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
    }

    .password-input {
      width: 100%;
      padding: 0.8rem 1rem;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      color: var(--text);
      font-size: 1rem;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      box-sizing: border-box;
    }

    .password-input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 15px var(--glow);
      background: rgba(255, 255, 255, 0.08);
    }

    .password-input::placeholder {
      color: var(--text-dim);
    }

    .password-error {
      color: #EF4444;
      font-size: 0.85rem;
      margin-top: 0.5rem;
      display: none;
    }

    .password-hint {
      color: var(--text-dim);
      font-size: 0.8rem;
      margin-top: 0.5rem;
      font-style: italic;
    }

    .delete-modal-buttons {
      display: flex;
      gap: 1rem;
      justify-content: center;
    }

    .delete-modal-btn {
      padding: 0.8rem 1.5rem;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .delete-modal-btn.confirm {
      background: #EF4444;
      color: white;
    }

    .delete-modal-btn.confirm:hover:not(:disabled) {
      background: #DC2626;
      transform: translateY(-2px);
    }

    .delete-modal-btn.confirm:disabled {
      background: #6B7280;
      cursor: not-allowed;
      transform: none;
    }

    .delete-modal-btn.cancel {
      background: rgba(255, 255, 255, 0.1);
      color: var(--text);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .delete-modal-btn.cancel:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-2px);
    }

    /* Password shake animation */
    @keyframes passwordShake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-8px); }
      75% { transform: translateX(8px); }
    }

    .password-shake {
      animation: passwordShake 0.5s ease-in-out;
    }

    /* Search highlight */
    .highlight {
      background: rgba(255, 255, 0, 0.3);
      padding: 0.1rem 0.2rem;
      border-radius: 3px;
    }

    /* Export Modal Styles */
    .export-modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      backdrop-filter: blur(10px);
      animation: fadeIn 0.3s ease-out;
    }

    .export-modal {
      background: var(--bg-end);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 20px;
      padding: 2rem;
      max-width: 900px;
      width: 95%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5);
      animation: slideInScale 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .export-modal-header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .export-modal-header h2 {
      color: var(--accent);
      font-size: 1.8rem;
      margin-bottom: 0.5rem;
      text-shadow: 0 0 20px var(--glow);
    }

    .export-modal-header p {
      color: var(--text-dim);
      font-size: 1rem;
      line-height: 1.6;
    }

    .export-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .export-option {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 2rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
    }

    .export-option:hover {
      transform: translateY(-8px);
      border-color: var(--accent);
      box-shadow: 0 20px 60px var(--glow);
      background: rgba(255, 255, 255, 0.08);
    }

    .export-option::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transition: left 0.6s ease;
    }

    .export-option:hover::before {
      left: 100%;
    }

    .export-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
      filter: drop-shadow(0 0 10px var(--glow));
    }

    .export-option h3 {
      color: var(--text);
      font-size: 1.3rem;
      margin-bottom: 1rem;
      font-weight: 600;
    }

    .export-option p {
      color: var(--text-dim);
      font-size: 0.95rem;
      line-height: 1.5;
      margin-bottom: 1.5rem;
    }

    .export-features {
      color: var(--accent);
      font-size: 0.85rem;
      line-height: 1.6;
      background: rgba(255, 255, 255, 0.03);
      padding: 1rem;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .export-stats {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-bottom: 2rem;
      padding: 1.5rem;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 15px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .stat-item {
      text-align: center;
    }

    .stat-number {
      display: block;
      font-size: 2rem;
      font-weight: bold;
      color: var(--accent);
      text-shadow: 0 0 15px var(--glow);
    }

    .stat-label {
      color: var(--text-dim);
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-top: 0.5rem;
    }

    .export-modal-footer {
      text-align: center;
    }

    .export-close-btn {
      padding: 0.8rem 2rem;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 10px;
      color: var(--text);
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .export-close-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      border-color: var(--accent);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px var(--glow);
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideInScale {
      from {
        opacity: 0;
        transform: scale(0.8) translateY(50px);
      }
      to {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }

    /* Responsive */
    @media (max-width: 768px) {
      .countdown-container {
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
      }
      
      .countdown-box {
        padding: 1.5rem 0.5rem;
      }
      
      .countdown-number {
        font-size: 2rem;
      }
      
      .class-logo-section {
        top: 0.5rem;
        left: 0.5rem;
        padding: 0.6rem 0.8rem;
        gap: 0.8rem;
      }

      .class-logo svg {
        width: 50px;
        height: 50px;
      }

      .class-name {
        font-size: 0.9rem;
      }
      
      .theme-switcher {
        top: 0.5rem;
        right: 0.5rem;
        gap: 0.2rem;
      }

      .messages-container {
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
        padding: 0 0.5rem;
      }

      .message-card {
        padding: 1.5rem;
      }

      .form-container {
        margin: 0 1rem;
      }

      .section {
        padding: 3rem 1rem;
      }

      .admin-controls {
        flex-direction: column;
        align-items: stretch;
        gap: 0.5rem;
      }

      .admin-btn {
        justify-content: center;
        padding: 0.8rem;
      }

      .admin-panel {
        padding: 1rem;
      }

      .admin-panel > div:first-child {
        flex-direction: column;
        align-items: stretch;
        gap: 0.5rem;
      }

      .admin-panel > div:nth-child(2) {
        flex-direction: column;
        gap: 0.5rem;
      }

      .admin-panel > div:last-child {
        flex-direction: column;
        gap: 0.5rem;
      }

      #searchInput {
        min-width: auto;
      }

      .export-modal {
        width: 98%;
        padding: 1.5rem;
        max-height: 95vh;
      }

      .export-options {
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .export-option {
        padding: 1.5rem;
      }

      .export-stats {
        flex-direction: column;
        gap: 1rem;
      }

      .export-modal-header h2 {
        font-size: 1.5rem;
      }
    }

    @media (max-width: 480px) {
      .hero-title {
        font-size: 2rem;
        line-height: 1.3;
      }

      .hero-subtitle {
        font-size: 1rem;
      }

      .countdown-number {
        font-size: 1.8rem;
      }

      .countdown-box {
        padding: 1rem 0.5rem;
      }

      .class-logo-section {
        flex-direction: column;
        gap: 0.5rem;
        padding: 0.5rem;
        text-align: center;
      }

      .class-logo svg {
        width: 50px;
        height: 50px;
      }

      .class-name {
        font-size: 0.9rem;
      }

      .theme-switcher {
        top: 0.5rem;
        right: 0.5rem;
        gap: 0.2rem;
      }

      .theme-btn {
        width: 24px;
        height: 24px;
      }

      .messages-container {
        grid-template-columns: 1fr;
        gap: 1.5rem;
      }

      .message-text::before,
      .message-text::after {
        font-size: 1.5rem;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="animated-bg" id="mainBg"><!-- Floating Particles -->
   <div class="particles" id="particles"></div><!-- Theme Switcher -->
   <div class="theme-switcher">
    <div class="theme-btn theme-deep" data-theme="deep" title="Deep Blue"></div>
    <div class="theme-btn theme-emerald-btn" data-theme="emerald" title="Emerald Green"></div>
    <div class="theme-btn theme-slate-btn active" data-theme="slate" title="Slate Gray"></div>
    <div class="theme-btn theme-rose-btn" data-theme="rose" title="Luxury Rose"></div>
    <div class="theme-btn theme-brown-btn" data-theme="brown" title="Luxury Brown"></div>
   </div><!-- Class Logo Section -->
   <div class="class-logo-section">
    <div class="class-logo">
     <svg width="40" height="40" viewbox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg"><!-- Graduation cap --> <circle cx="40" cy="40" r="35" fill="var(--accent)" opacity="0.1" /> <path d="M15 35L40 25L65 35L40 45L15 35Z" fill="var(--accent)" /> <path d="M40 45V55C40 57 42 59 45 59H35C38 59 40 57 40 55V45Z" fill="var(--accent)" opacity="0.8" /> <circle cx="62" cy="35" r="3" fill="var(--secondary)" /> <path d="M62 38V48" stroke="var(--secondary)" stroke-width="2" /> <!-- Class number --> <text x="40" y="48" text-anchor="middle" fill="var(--text)" font-size="12" font-weight="bold">
       12A1
      </text>
     </svg>
    </div>
    <div class="class-info">
     <h3 class="class-name">Lá»šP 12A1</h3>
    </div>
   </div><!-- Hero Section -->
   <section class="hero-section">
    <h1 class="hero-title">Äáº¾M NGÆ¯á»¢C Äáº¾N NGÃ€Y THI THPT QUá»C GIA 2025</h1>
    <p class="hero-subtitle">CÃ²n bao nhiÃªu thá»i gian ná»¯a cho Æ°á»›c mÆ¡ cá»§a báº¡n?</p>
    <div class="countdown-container">
     <div class="countdown-box">
      <div class="countdown-number" id="days">
       0
      </div>
      <div class="countdown-label">
       NgÃ y
      </div>
     </div>
     <div class="countdown-box">
      <div class="countdown-number" id="hours">
       0
      </div>
      <div class="countdown-label">
       Giá»
      </div>
     </div>
     <div class="countdown-box">
      <div class="countdown-number" id="minutes">
       0
      </div>
      <div class="countdown-label">
       PhÃºt
      </div>
     </div>
     <div class="countdown-box">
      <div class="countdown-number" id="seconds">
       0
      </div>
      <div class="countdown-label">
       GiÃ¢y
      </div>
     </div>
    </div>
   </section><!-- Form Section -->
   <section class="section">
    <h2 class="section-title scroll-reveal">Gá»­i lá»i chÃºc Ä‘áº¿n cÃ¡c sÄ© tá»­ 12A1</h2>
    <div class="form-container glass scroll-reveal-scale">
     <form id="messageForm" style="padding: 2rem;">
      <div class="form-group scroll-reveal-left"><label for="authorInput" class="form-label">TÃªn cá»§a báº¡n</label> <input type="text" id="authorInput" class="form-input" placeholder="Nháº­p tÃªn cá»§a báº¡n" required>
      </div>
      <div class="form-group scroll-reveal-right"><label for="messageInput" class="form-label">Lá»i chÃºc cá»§a báº¡n</label> <textarea id="messageInput" class="form-textarea" rows="4" placeholder="Gá»­i lá»i chÃºc, Ä‘á»™ng viÃªn Ä‘áº¿n cÃ¡c báº¡n thÃ­ sinh..." required></textarea>
      </div>
      <div class="form-group scroll-reveal-left"><label class="checkbox-container"> <input type="checkbox" id="anonymousCheck" class="checkbox-input"> <span class="checkbox-custom"></span> <span class="checkbox-label">Gá»­i áº©n danh</span> </label>
      </div><button type="submit" class="submit-btn scroll-reveal" id="submitBtn"> <span id="submitText">Gá»­i lá»i chÃºc ğŸ’«</span> <span id="submitSpinner" class="spinner" style="display: none;"></span> </button>
     </form>
    </div>
   </section><!-- Messages Display Section -->
   <section class="section">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
     <h2 class="section-title scroll-reveal" style="margin-bottom: 0;">Lá»œI CHÃšC Tá»ª Cá»˜NG Äá»’NG</h2><!-- Admin Controls -->
     <div class="admin-controls scroll-reveal" style="display: flex; gap: 1rem; align-items: center;"><button id="toggleAdminBtn" class="admin-btn"> ğŸ”§ Quáº£n lÃ½ </button> <button id="exportBtn" class="admin-btn export-btn"> ğŸ“Š Xuáº¥t lá»i chÃºc </button>
     </div>
    </div><!-- Admin Panel -->
    <div id="adminPanel" class="admin-panel glass" style="display: none; margin-bottom: 2rem; padding: 1.5rem;">
     <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
      <h3 style="color: var(--accent); margin: 0; font-size: 1.2rem;">ğŸ› ï¸ Báº£ng Ä‘iá»u khiá»ƒn quáº£n lÃ½</h3>
      <div style="display: flex; gap: 0.5rem;"><span id="totalMessages" style="color: var(--text-dim); font-size: 0.9rem;">Tá»•ng: 0 lá»i chÃºc</span>
      </div>
     </div>
     <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 1rem;"><button id="selectAllBtn" class="admin-action-btn">âœ… Chá»n táº¥t cáº£</button> <button id="deselectAllBtn" class="admin-action-btn">âŒ Bá» chá»n táº¥t cáº£</button> <button id="deleteSelectedBtn" class="admin-action-btn delete-btn">ğŸ—‘ï¸ XÃ³a Ä‘Ã£ chá»n</button> <button id="exportSelectedBtn" class="admin-action-btn export-btn">ğŸ“‹ Xuáº¥t Ä‘Ã£ chá»n</button>
     </div>
     <div style="display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;"><input type="text" id="searchInput" placeholder="ğŸ” TÃ¬m kiáº¿m lá»i chÃºc..." style="flex: 1; min-width: 200px; padding: 0.5rem; border-radius: 8px; border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.05); color: var(--text);"> <select id="sortSelect" style="padding: 0.5rem; border-radius: 8px; border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.05); color: var(--text);"> <option value="newest">ğŸ“… Má»›i nháº¥t</option> <option value="oldest">ğŸ“… CÅ© nháº¥t</option> <option value="author">ğŸ‘¤ Theo tÃªn</option> </select>
     </div>
    </div>
    <div class="messages-container scroll-reveal-fade" id="messagesContainer"><!-- Messages will be displayed here -->
    </div><!-- Floating elements around messages -->
    <div class="message-particles" id="messageParticles"></div>
   </section><!-- Footer -->
   <section class="section scroll-reveal-scale" style="text-align: center; padding-bottom: 3rem;">
    <p style="color: var(--text-dim); font-size: 1.1rem; font-weight: 300;">HÃ£y chia sáº» trang web nÃ y Ä‘áº¿n vá»›i má»i ngÆ°á»i nhÃ©.</p>
   </section>
  </div><!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <script>
    // ===== Cáº¤U HÃŒNH FIREBASE =====
    // ğŸ”§ THAY Äá»”I CONFIG NÃ€Y Báº°NG CONFIG Cá»¦A Báº N
    const firebaseConfig = {
      apiKey: "AIzaSyD3nKhQqNKuN8QfsBrAv-p7Jzl5mb9fkhY",
      authDomain: "thpt-countdown-2025.firebaseapp.com",
      databaseURL: "https://thpt-countdown-2025-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "thpt-countdown-2025",
      storageBucket: "thpt-countdown-2025.firebasestorage.app",
      messagingSenderId: "298021611667",
      appId: "1:298021611667:web:ad1f33aca9cc0af1efc566",
      measurementId: "G-PXKY8ZZD8S"
    };

    // ===== BIáº¾N TOÃ€N Cá»¤C =====
    let currentTheme = 'slate';
    let autoThemeTimer = null;
    let userInteracted = false;
    let themeIndex = 0;
    let restartTimer = null;
    let allMessages = [];
    let firebaseApp = null;
    let database = null;
    let isFirebaseConnected = false;
    let connectionStatus = 'checking'; // 'checking', 'connected', 'offline', 'error'
    let pendingMessages = []; // Lá»i chÃºc chá» sync khi cÃ³ máº¡ng
    let isAdminMode = false;
    let selectedMessages = new Set();
    let filteredMessages = [];

    // ThÃªm vÃ o Ä‘áº§u pháº§n JavaScript
    let isFirstLoad = true;
    let animationTargets = { days: 0, hours: 0, minutes: 0, seconds: 0 };
        
    // Danh sÃ¡ch cÃ¡c theme sáº½ tá»± Ä‘á»™ng chuyá»ƒn Ä‘á»•i
    const autoThemes = ['rose', 'brown', 'emerald', 'deep'];

    // ===== TÃNH TOÃN NGÃ€Y THI =====
    const examDate = new Date('2026-06-11T07:30:00+07:00').getTime(); // 7h30 ngÃ y 26/6/2026 (GMT+7)

    // ===== Táº O HIá»†U á»¨NG PARTICLES =====
    function createParticles() {
      const particles = document.getElementById('particles');
      
      for (let i = 0; i < 70; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 20 + 's';
        particle.style.animationDuration = (15 + Math.random() * 10) + 's';
        particles.appendChild(particle);
      }
    }
    
    function createMessageParticles() {
      const messageParticles = document.getElementById('messageParticles');
      if (!messageParticles) return;  // ThoÃ¡t náº¿u khÃ´ng tÃ¬m tháº¥y container
      
      // 3 loáº¡i hÃ¬nh dáº¡ng háº¡t bay
      const particleTypes = ['circle', 'square', 'diamond'];
      
      // Táº¡o 40 háº¡t bay cho pháº§n lá»i chÃºc (cÃ³ thá»ƒ thay Ä‘á»•i sá»‘ nÃ y)
      for (let i = 0; i < 40; i++) {
        const particle = document.createElement('div');
        
        // Chá»n ngáº«u nhiÃªn 1 trong 3 loáº¡i hÃ¬nh dáº¡ng
        const type = particleTypes[Math.floor(Math.random() * particleTypes.length)];
        particle.className = `message-particle ${type}`;
        
        // Vá»‹ trÃ­ ngang ngáº«u nhiÃªn
        particle.style.left = Math.random() * 100 + '%';
        
        // Thá»i gian báº¯t Ä‘áº§u ngáº«u nhiÃªn (0-8 giÃ¢y)
        particle.style.animationDelay = Math.random() * 8 + 's';
        
        // Thá»i gian bay ngáº«u nhiÃªn (6-10 giÃ¢y)
        particle.style.animationDuration = (6 + Math.random() * 4) + 's';
        
        messageParticles.appendChild(particle);
      }
    }


    // ===== Há»† THá»NG Äá»”I THEME =====
    function switchTheme(theme, isAutomatic = false) {
      const body = document.body;
      body.style.transition = 'all 1.5s cubic-bezier(0.4, 0, 0.2, 1)';
      
      body.className = body.className.replace(/theme-\w+/g, '');
      
      if (theme !== 'slate') {
        body.classList.add(`theme-${theme}`);
      }
      
      document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      document.querySelector(`[data-theme="${theme}"]`).classList.add('active');
      
      currentTheme = theme;
      
      if (!isAutomatic) {
        userInteracted = true;
        stopAutoTheme();
        startRestartTimer();
      }
      
      setTimeout(() => {
        body.style.transition = '';
      }, 1500);
    }

    function startAutoTheme() {
      if (userInteracted) return;
      
      stopRestartTimer();
      
      autoThemeTimer = setInterval(() => {
        if (!userInteracted) {
          const nextTheme = autoThemes[themeIndex];
          switchTheme(nextTheme, true);
          themeIndex = (themeIndex + 1) % autoThemes.length;
        } else {
          stopAutoTheme();
        }
      }, 8000);
    }

    function stopAutoTheme() {
      if (autoThemeTimer) {
        clearInterval(autoThemeTimer);
        autoThemeTimer = null;
      }
    }

    function startRestartTimer() {
      if (restartTimer) {
        clearTimeout(restartTimer);
      }
      
      restartTimer = setTimeout(() => {
        userInteracted = false;
        startAutoTheme();
        restartTimer = null;
      }, 15000);
    }

    function stopRestartTimer() {
      if (restartTimer) {
        clearTimeout(restartTimer);
        restartTimer = null;
      }
    }

    // ===== Há»† THá»NG Äáº¾M NGÆ¯á»¢C =====
    function updateCountdown() {
      const now = new Date().getTime();
      const distance = examDate - now;

      if (distance < 0) {
        document.querySelector('.hero-title').textContent = 'ÄÃƒ Äáº¾N GIá»œ CHINH PHá»¤C Æ¯á»šC MÆ ';
        document.getElementById('days').textContent = '0';
        document.getElementById('hours').textContent = '0';
        document.getElementById('minutes').textContent = '0';
        document.getElementById('seconds').textContent = '0';
        return;
      }

      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);

      // Náº¿u lÃ  láº§n Ä‘áº§u load, cháº¡y animation tÄƒng dáº§n
      if (isFirstLoad) {
        animationTargets = { days, hours, minutes, seconds };
        startCountUpAnimation();
        isFirstLoad = false;
      } else {
        // Cáº­p nháº­t bÃ¬nh thÆ°á»ng vá»›i animation flip
        updateNumberWithAnimation('days', days);
        updateNumberWithAnimation('hours', hours);
        updateNumberWithAnimation('minutes', minutes);
        updateNumberWithAnimation('seconds', seconds);
      }
    }
    function startCountUpAnimation() {
      const duration = 5000; // 5 giÃ¢y
      const startTime = Date.now();
      
      function animate() {
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / duration, 1);
        
        // Sá»­ dá»¥ng easing function Ä‘á»ƒ animation mÆ°á»£t mÃ  hÆ¡n
        const easeOutQuart = 1 - Math.pow(1 - progress, 2);
        
        // TÃ­nh toÃ¡n giÃ¡ trá»‹ hiá»‡n táº¡i cho má»—i Ä‘Æ¡n vá»‹
        const currentDays = Math.floor(animationTargets.days * easeOutQuart);
        const currentHours = Math.floor(animationTargets.hours * easeOutQuart);
        const currentMinutes = Math.floor(animationTargets.minutes * easeOutQuart);
        const currentSeconds = Math.floor(animationTargets.seconds * easeOutQuart);
        
        // Cáº­p nháº­t hiá»ƒn thá»‹
        document.getElementById('days').textContent = currentDays;
        document.getElementById('hours').textContent = currentHours;
        document.getElementById('minutes').textContent = currentMinutes;
        document.getElementById('seconds').textContent = currentSeconds;
        
        // ThÃªm hiá»‡u á»©ng glow khi Ä‘ang animate
        if (progress < 1) {
          document.querySelectorAll('.countdown-number').forEach(el => {
            el.classList.add('number-glow');
          });
          requestAnimationFrame(animate);
        } else {
          // Animation hoÃ n thÃ nh, hiá»ƒn thá»‹ giÃ¡ trá»‹ chÃ­nh xÃ¡c
          document.getElementById('days').textContent = animationTargets.days;
          document.getElementById('hours').textContent = animationTargets.hours;
          document.getElementById('minutes').textContent = animationTargets.minutes;
          document.getElementById('seconds').textContent = animationTargets.seconds;
          
          // Táº¯t hiá»‡u á»©ng glow
          document.querySelectorAll('.countdown-number').forEach(el => {
            el.classList.remove('number-glow');
          });
          
          // ThÃªm hiá»‡u á»©ng pulse khi hoÃ n thÃ nh
          document.querySelectorAll('.countdown-number').forEach((el, index) => {
            setTimeout(() => {
              el.classList.add('number-pulse');
              setTimeout(() => el.classList.remove('number-pulse'), 1000);
            }, index * 500);
          });
        }
      }
      
      animate();
    }

    function updateNumberWithAnimation(id, newValue) {
      const element = document.getElementById(id);
      const currentValue = element.textContent;
      
      if (currentValue !== newValue.toString()) {
        element.classList.add('number-flip');
        
        if (id === 'seconds') {
          element.classList.add('number-glow');
        }
        
        if (id === 'minutes' && newValue % 5 === 0) {
          element.classList.add('number-pulse');
        }
        
        setTimeout(() => {
          element.textContent = newValue;
        }, 400);
        
        setTimeout(() => {
          element.classList.remove('number-flip', 'number-glow', 'number-pulse');
        }, 800);
        // ThÃªm hiá»‡u á»©ng rung nháº¹ cho cÃ¡c má»‘c quan trá»ng
        if ((id === 'days' && newValue % 10 === 0) ||     // Má»—i 10 ngÃ y
            (id === 'hours' && newValue === 0) ||         // Khi giá» vá» 0
            (id === 'minutes' && newValue === 0) || // Khi phÃºt vá» 0
            (id === 'seconds' && newValue === 0)) { 
          
          element.parentElement.style.animation = 'gentleShake 0.5s ease-in-out';
          setTimeout(() => {
            element.parentElement.style.animation = '';
          }, 500);
      }}
    }

    // ===== Há»† THá»NG FIREBASE =====
    
    /**
     * Khá»Ÿi táº¡o Firebase vÃ  thiáº¿t láº­p káº¿t ná»‘i
     */
    async function initFirebase() {
      try {
        // Kiá»ƒm tra config Firebase cÃ³ há»£p lá»‡ khÃ´ng
        if (firebaseConfig.apiKey === "your-api-key-here") {
          console.warn('ğŸ”§ Firebase chÆ°a Ä‘Æ°á»£c cáº¥u hÃ¬nh! Sá»­ dá»¥ng localStorage.');
          connectionStatus = 'offline';
          updateConnectionStatus();
          return false;
        }

        // Khá»Ÿi táº¡o Firebase
        firebaseApp = firebase.initializeApp(firebaseConfig);
        database = firebase.database();
        
        // Kiá»ƒm tra káº¿t ná»‘i
        const connectedRef = database.ref('.info/connected');
        connectedRef.on('value', (snapshot) => {
          if (snapshot.val() === true) {
            isFirebaseConnected = true;
            connectionStatus = 'connected';
            console.log('ğŸ”¥ Firebase Ä‘Ã£ káº¿t ná»‘i thÃ nh cÃ´ng!');
            
            // Sync cÃ¡c lá»i chÃºc Ä‘ang chá»
            syncPendingMessages();
          } else {
            isFirebaseConnected = false;
            connectionStatus = 'offline';
            console.log('ğŸ“¡ Firebase máº¥t káº¿t ná»‘i, sá»­ dá»¥ng localStorage');
          }
          updateConnectionStatus();
        });

        // Láº¯ng nghe thay Ä‘á»•i dá»¯ liá»‡u tá»« Firebase
        const messagesRef = database.ref('messages');
        messagesRef.on('value', (snapshot) => {
          const data = snapshot.val();
          if (data) {
            const firebaseMessages = Object.keys(data).map(key => ({
              id: key,
              ...data[key]
            }));
            
            // Merge vá»›i localStorage vÃ  cáº­p nháº­t giao diá»‡n
            allMessages = mergeMessages(firebaseMessages, loadMessagesFromLocalStorage());
            saveMessagesToLocalStorage(allMessages);
            renderMessages(allMessages);
          }
        });

        return true;
      } catch (error) {
        console.error('âŒ Lá»—i khá»Ÿi táº¡o Firebase:', error);
        connectionStatus = 'error';
        updateConnectionStatus();
        return false;
      }
    }

    /**
     * Gá»­i lá»i chÃºc lÃªn Firebase
     */
    async function saveMessageToFirebase(message) {
      if (!isFirebaseConnected || !database) {
        // ThÃªm vÃ o hÃ ng Ä‘á»£i Ä‘á»ƒ sync sau
        pendingMessages.push(message);
        savePendingMessages();
        return false;
      }

      try {
        const messagesRef = database.ref('messages');
        await messagesRef.push({
          author: message.author,
          message: message.message,
          timestamp: message.timestamp
        });
        return true;
      } catch (error) {
        console.error('âŒ Lá»—i gá»­i lÃªn Firebase:', error);
        // ThÃªm vÃ o hÃ ng Ä‘á»£i Ä‘á»ƒ thá»­ láº¡i sau
        pendingMessages.push(message);
        savePendingMessages();
        return false;
      }
    }

    /**
     * Sync cÃ¡c lá»i chÃºc Ä‘ang chá» lÃªn Firebase
     */
    async function syncPendingMessages() {
      if (pendingMessages.length === 0) return;

      console.log(`ğŸ”„ Äang sync ${pendingMessages.length} lá»i chÃºc chá»...`);
      
      const messagesToSync = [...pendingMessages];
      pendingMessages = [];
      
      for (const message of messagesToSync) {
        const success = await saveMessageToFirebase(message);
        if (!success) {
          // Náº¿u tháº¥t báº¡i, thÃªm láº¡i vÃ o hÃ ng Ä‘á»£i
          pendingMessages.push(message);
        }
      }
      
      savePendingMessages();
      
      if (pendingMessages.length === 0) {
        showNotification('âœ… ÄÃ£ Ä‘á»“ng bá»™ táº¥t cáº£ lá»i chÃºc!', 'success');
      }
    }

    /**
     * Merge dá»¯ liá»‡u tá»« Firebase vÃ  localStorage
     */
    function mergeMessages(firebaseMessages, localMessages) {
      const merged = new Map();
      
      // ThÃªm táº¥t cáº£ lá»i chÃºc tá»« Firebase
      firebaseMessages.forEach(msg => {
        merged.set(msg.timestamp, msg);
      });
      
      // ThÃªm lá»i chÃºc tá»« localStorage (náº¿u chÆ°a cÃ³ trong Firebase)
      localMessages.forEach(msg => {
        if (!merged.has(msg.timestamp)) {
          merged.set(msg.timestamp, msg);
        }
      });
      
      return Array.from(merged.values());
    }

    /**
     * Cáº­p nháº­t tráº¡ng thÃ¡i káº¿t ná»‘i trÃªn giao diá»‡n
     */
    function updateConnectionStatus() {
      // Táº¡o hoáº·c cáº­p nháº­t indicator tráº¡ng thÃ¡i káº¿t ná»‘i
      let statusIndicator = document.getElementById('connectionStatus');
      
      if (!statusIndicator) {
        statusIndicator = document.createElement('div');
        statusIndicator.id = 'connectionStatus';
        statusIndicator.style.cssText = `
          position: fixed;
          bottom: 1rem;
          right: 1rem;
          padding: 0.5rem 1rem;
          border-radius: 20px;
          font-size: 0.8rem;
          font-weight: 600;
          z-index: 1000;
          backdrop-filter: blur(10px);
          transition: all 0.3s ease;
          cursor: pointer;
        `;
        document.body.appendChild(statusIndicator);
      }

      let statusText, statusColor, statusBg;
      
      switch (connectionStatus) {
        case 'connected':
          statusText = 'ğŸ”¥ Äá»“ng bá»™ trá»±c tuyáº¿n';
          statusColor = '#10B981';
          statusBg = 'rgba(16, 185, 129, 0.1)';
          break;
        case 'offline':
          statusText = 'ğŸ“± Cháº¿ Ä‘á»™ ngoáº¡i tuyáº¿n';
          statusColor = '#F59E0B';
          statusBg = 'rgba(245, 158, 11, 0.1)';
          break;
        case 'error':
          statusText = 'âš ï¸ Lá»—i káº¿t ná»‘i';
          statusColor = '#EF4444';
          statusBg = 'rgba(239, 68, 68, 0.1)';
          break;
        default:
          statusText = 'ğŸ”„ Äang káº¿t ná»‘i...';
          statusColor = '#6B7280';
          statusBg = 'rgba(107, 114, 128, 0.1)';
      }

      statusIndicator.textContent = statusText;
      statusIndicator.style.color = statusColor;
      statusIndicator.style.background = statusBg;
      statusIndicator.style.border = `1px solid ${statusColor}`;
      
      // ThÃªm tooltip khi hover
      statusIndicator.title = getStatusTooltip();
    }

    /**
     * Láº¥y tooltip cho tráº¡ng thÃ¡i káº¿t ná»‘i
     */
    function getStatusTooltip() {
      switch (connectionStatus) {
        case 'connected':
          return 'Káº¿t ná»‘i Firebase thÃ nh cÃ´ng! Lá»i chÃºc Ä‘Æ°á»£c Ä‘á»“ng bá»™ thá»i gian thá»±c.';
        case 'offline':
          return 'KhÃ´ng cÃ³ káº¿t ná»‘i Firebase. Lá»i chÃºc lÆ°u cá»¥c bá»™ vÃ  sáº½ Ä‘á»“ng bá»™ khi cÃ³ máº¡ng.';
        case 'error':
          return 'CÃ³ lá»—i káº¿t ná»‘i Firebase. Kiá»ƒm tra cáº¥u hÃ¬nh hoáº·c káº¿t ná»‘i máº¡ng.';
        default:
          return 'Äang thá»­ káº¿t ná»‘i Ä‘áº¿n Firebase...';
      }
    }

    // ===== Há»† THá»NG LÆ¯U TRá»® Dá»° PHÃ’NG (LOCALSTORAGE) =====
    
    function saveMessagesToLocalStorage(messages) {
      try {
        localStorage.setItem('thpt_messages_github', JSON.stringify(messages));
      } catch (error) {
        console.error('KhÃ´ng thá»ƒ lÆ°u dá»¯ liá»‡u:', error);
      }
    }

    function loadMessagesFromLocalStorage() {
      try {
        const saved = localStorage.getItem('thpt_messages_github');
        return saved ? JSON.parse(saved) : [];
      } catch (error) {
        console.error('KhÃ´ng thá»ƒ táº£i dá»¯ liá»‡u:', error);
        return [];
      }
    }

    function savePendingMessages() {
      try {
        localStorage.setItem('thpt_pending_messages', JSON.stringify(pendingMessages));
      } catch (error) {
        console.error('KhÃ´ng thá»ƒ lÆ°u pending messages:', error);
      }
    }

    function loadPendingMessages() {
      try {
        const saved = localStorage.getItem('thpt_pending_messages');
        return saved ? JSON.parse(saved) : [];
      } catch (error) {
        console.error('KhÃ´ng thá»ƒ táº£i pending messages:', error);
        return [];
      }
    }

    function renderMessages(messages) {
      const container = document.getElementById('messagesContainer');
      
      if (messages.length === 0) {
        container.innerHTML = '<p style="text-align: center; color: var(--text-dim); font-style: italic;">ChÆ°a cÃ³ lá»i chÃºc nÃ o. HÃ£y lÃ  ngÆ°á»i Ä‘áº§u tiÃªn gá»­i lá»i Ä‘á»™ng viÃªn!</p>';
        updateMessageCount(0);
        return;
      }

      // Ãp dá»¥ng filter vÃ  sort
      filteredMessages = applyFiltersAndSort([...messages]);
      updateMessageCount(filteredMessages.length);
      
      container.innerHTML = filteredMessages.map((msg, index) => {
        const animationClass = index % 3 === 0 ? 'scroll-reveal' : 
                             index % 3 === 1 ? 'scroll-reveal-left' : 'scroll-reveal-right';
        
        const isSelected = selectedMessages.has(msg.id || msg.timestamp);
        const adminModeClass = isAdminMode ? 'admin-mode' : '';
        const selectedClass = isSelected ? 'selected' : '';
        
        return `
          <div class="message-card ${animationClass} ${adminModeClass} ${selectedClass}" 
               data-message-id="${msg.id || msg.timestamp}"
               onclick="${isAdminMode ? 'toggleMessageSelection(this)' : ''}">
            <div class="message-text">${highlightSearchTerm(msg.message)}</div>
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <span class="message-author">â€” ${highlightSearchTerm(msg.author)}</span>
              <span class="message-time">${formatTime(msg.timestamp)}</span>
            </div>
          </div>
        `;
      }).join('');

      setTimeout(() => {
        const observerOptions = {
          threshold: 0.1,
          rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('revealed');
            }
          });
        }, observerOptions);

        container.querySelectorAll('.message-card').forEach(card => {
          observer.observe(card);
        });
      }, 100);
    }

    function formatTime(timestamp) {
      const date = new Date(timestamp);
      return date.toLocaleDateString('vi-VN') + ' ' + date.toLocaleTimeString('vi-VN', { 
        hour: '2-digit', 
        minute: '2-digit' 
      });
    }

    // ===== Xá»¬ LÃ FORM =====
    async function handleFormSubmit(event) {
      event.preventDefault();
      
      const submitBtn = document.getElementById('submitBtn');
      const submitText = document.getElementById('submitText');
      const submitSpinner = document.getElementById('submitSpinner');
      const form = document.getElementById('messageForm');
      const formContainer = document.querySelector('.form-container');

      formContainer.classList.add('form-shake');
      setTimeout(() => formContainer.classList.remove('form-shake'), 500);

      submitBtn.disabled = true;
      submitBtn.classList.add('loading');
      submitText.style.display = 'none';
      submitSpinner.style.display = 'inline-block';

      try {
        const authorInput = document.getElementById('authorInput').value.trim();
        const message = document.getElementById('messageInput').value.trim();
        const isAnonymous = document.getElementById('anonymousCheck').checked;
        
        const author = isAnonymous ? 'áº¨n danh' : (authorInput || 'áº¨n danh');

        const newMessage = {
          id: Date.now().toString(),
          author: author,
          message: message,
          timestamp: new Date().toISOString()
        };

        // Thá»­ gá»­i lÃªn Firebase trÆ°á»›c
        const firebaseSuccess = await saveMessageToFirebase(newMessage);
        
        // LuÃ´n lÆ°u vÃ o localStorage Ä‘á»ƒ Ä‘áº£m báº£o khÃ´ng máº¥t dá»¯ liá»‡u
        allMessages.push(newMessage);
        saveMessagesToLocalStorage(allMessages);
        
        // Cáº­p nháº­t giao diá»‡n ngay láº­p tá»©c
        renderMessages(allMessages);
        
        // Hiá»ƒn thá»‹ thÃ´ng bÃ¡o phÃ¹ há»£p
        if (firebaseSuccess) {
          showSuccessMessage(form, formContainer, 'Lá»i chÃºc Ä‘Ã£ Ä‘Æ°á»£c gá»­i vÃ  Ä‘á»“ng bá»™! ğŸ”¥');
        } else if (isFirebaseConnected) {
          showSuccessMessage(form, formContainer, 'Lá»i chÃºc Ä‘Ã£ Ä‘Æ°á»£c gá»­i! Äang thá»­ Ä‘á»“ng bá»™... â³');
        } else {
          showSuccessMessage(form, formContainer, 'Lá»i chÃºc Ä‘Ã£ Ä‘Æ°á»£c lÆ°u! Sáº½ Ä‘á»“ng bá»™ khi cÃ³ máº¡ng ğŸ“±');
        }
          
      } catch (error) {
        console.error('Lá»—i gá»­i lá»i chÃºc:', error);
        formContainer.style.opacity = '1';
        showNotification('CÃ³ lá»—i xáº£y ra. Vui lÃ²ng thá»­ láº¡i!', 'error');
      } finally {
        submitBtn.disabled = false;
        submitBtn.classList.remove('loading');
        submitText.style.display = 'inline';
        submitSpinner.style.display = 'none';
      }
    }

    function showSuccessMessage(form, formContainer, message) {
      formContainer.style.opacity = '0.3';
      
      setTimeout(() => {
        const successMsg = document.createElement('div');
        successMsg.className = 'success-message';
        successMsg.textContent = message;
        formContainer.appendChild(successMsg);
        
        setTimeout(() => successMsg.classList.add('show'), 100);
        
        setTimeout(() => {
          form.reset();
          
          const anonymousCheck = document.getElementById('anonymousCheck');
          const authorInput = document.getElementById('authorInput');
          const authorGroup = authorInput.closest('.form-group');
          
          anonymousCheck.checked = false;
          authorInput.disabled = false;
          authorInput.setAttribute('required', '');
          authorGroup.style.opacity = '1';
          authorInput.placeholder = 'Nháº­p tÃªn cá»§a báº¡n';
          
          formContainer.style.opacity = '1';
          successMsg.remove();
        }, 2000);
      }, 300);
    }

    function showNotification(message, type) {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: ${type === 'success' ? 'var(--secondary)' : type === 'warning' ? '#F59E0B' : '#EF4444'};
        color: white;
        padding: 1rem 2rem;
        border-radius: 12px;
        font-weight: 600;
        z-index: 10000;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        animation: fadeInUp 0.3s ease-out;
      `;
      notification.textContent = message;
      document.body.appendChild(notification);

      setTimeout(() => {
        notification.style.animation = 'fadeInUp 0.3s ease-out reverse';
        setTimeout(() => notification.remove(), 300);
      }, 3000);
    }

    function handleAnonymousToggle() {
      const anonymousCheck = document.getElementById('anonymousCheck');
      const authorInput = document.getElementById('authorInput');
      const authorGroup = authorInput.closest('.form-group');
      
      if (anonymousCheck.checked) {
        authorInput.removeAttribute('required');
        authorInput.value = '';
        authorGroup.style.opacity = '0.5';
        authorInput.disabled = true;
        authorInput.placeholder = 'Sáº½ hiá»ƒn thá»‹ lÃ  "áº¨n danh"';
      } else {
        authorInput.setAttribute('required', '');
        authorGroup.style.opacity = '1';
        authorInput.disabled = false;
        authorInput.placeholder = 'Nháº­p tÃªn cá»§a báº¡n';
      }
    }

    function initScrollReveal() {
      const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('revealed');
          }
        });
      }, observerOptions);

      document.querySelectorAll('.scroll-reveal, .scroll-reveal-left, .scroll-reveal-right, .scroll-reveal-scale, .scroll-reveal-fade').forEach(el => {
        observer.observe(el);
      });
    }

    // ===== Há»† THá»NG QUáº¢N LÃ ADMIN =====
    
    function toggleAdminMode() {
      isAdminMode = !isAdminMode;
      const toggleBtn = document.getElementById('toggleAdminBtn');
      const adminPanel = document.getElementById('adminPanel');
      
      if (isAdminMode) {
        toggleBtn.classList.add('active');
        toggleBtn.innerHTML = 'ğŸ”§ ThoÃ¡t quáº£n lÃ½';
        adminPanel.style.display = 'block';
        selectedMessages.clear();
      } else {
        toggleBtn.classList.remove('active');
        toggleBtn.innerHTML = 'ğŸ”§ Quáº£n lÃ½';
        adminPanel.style.display = 'none';
        selectedMessages.clear();
      }
      
      renderMessages(allMessages);
    }

    function toggleMessageSelection(cardElement) {
      if (!isAdminMode) return;
      
      const messageId = cardElement.dataset.messageId;
      
      if (selectedMessages.has(messageId)) {
        selectedMessages.delete(messageId);
        cardElement.classList.remove('selected');
      } else {
        selectedMessages.add(messageId);
        cardElement.classList.add('selected');
      }
      
      updateSelectionButtons();
    }

    function selectAllMessages() {
      selectedMessages.clear();
      filteredMessages.forEach(msg => {
        selectedMessages.add(msg.id || msg.timestamp);
      });
      renderMessages(allMessages);
      updateSelectionButtons();
    }

    function deselectAllMessages() {
      selectedMessages.clear();
      renderMessages(allMessages);
      updateSelectionButtons();
    }

    function updateSelectionButtons() {
      const deleteBtn = document.getElementById('deleteSelectedBtn');
      const exportBtn = document.getElementById('exportSelectedBtn');
      const selectedCount = selectedMessages.size;
      
      deleteBtn.textContent = `ğŸ—‘ï¸ XÃ³a Ä‘Ã£ chá»n (${selectedCount})`;
      exportBtn.textContent = `ğŸ“‹ Xuáº¥t Ä‘Ã£ chá»n (${selectedCount})`;
      
      deleteBtn.disabled = selectedCount === 0;
      exportBtn.disabled = selectedCount === 0;
    }

    function updateMessageCount(count) {
      const totalElement = document.getElementById('totalMessages');
      if (totalElement) {
        totalElement.textContent = `Tá»•ng: ${count} lá»i chÃºc`;
      }
    }

    function applyFiltersAndSort(messages) {
      const searchTerm = document.getElementById('searchInput')?.value.toLowerCase() || '';
      const sortBy = document.getElementById('sortSelect')?.value || 'newest';
      
      // Filter by search term
      let filtered = messages;
      if (searchTerm) {
        filtered = messages.filter(msg => 
          msg.message.toLowerCase().includes(searchTerm) ||
          msg.author.toLowerCase().includes(searchTerm)
        );
      }
      
      // Sort messages
      switch (sortBy) {
        case 'oldest':
          filtered.sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));
          break;
        case 'author':
          filtered.sort((a, b) => a.author.localeCompare(b.author));
          break;
        case 'newest':
        default:
          filtered.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
          break;
      }
      
      return filtered;
    }

    function highlightSearchTerm(text) {
      const searchTerm = document.getElementById('searchInput')?.value.toLowerCase() || '';
      if (!searchTerm) return text;
      
      const regex = new RegExp(`(${searchTerm})`, 'gi');
      return text.replace(regex, '<span class="highlight">$1</span>');
    }

    async function deleteSelectedMessages() {
      if (selectedMessages.size === 0) {
        showNotification('Vui lÃ²ng chá»n Ã­t nháº¥t má»™t lá»i chÃºc Ä‘á»ƒ xÃ³a!', 'warning');
        return;
      }

      const selectedCount = selectedMessages.size;
      
      // Hiá»ƒn thá»‹ modal xÃ¡c nháº­n vá»›i máº­t kháº©u
      const confirmModal = document.createElement('div');
      confirmModal.className = 'delete-confirmation';
      confirmModal.innerHTML = `
        <div class="delete-modal">
          <h3>ğŸ” XÃ¡c nháº­n xÃ³a vá»›i máº­t kháº©u</h3>
          <p>Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a <strong>${selectedCount}</strong> lá»i chÃºc Ä‘Ã£ chá»n?<br>
          <em>HÃ nh Ä‘á»™ng nÃ y khÃ´ng thá»ƒ hoÃ n tÃ¡c!</em></p>
          
          <div class="password-input-group">
            <label for="deletePassword">Nháº­p máº­t kháº©u Ä‘á»ƒ xÃ¡c nháº­n:</label>
            <input type="password" id="deletePassword" class="password-input" 
                   placeholder="Nháº­p máº­t kháº©u admin..." autocomplete="off">
            <div class="password-error" id="passwordError">âŒ Máº­t kháº©u khÃ´ng chÃ­nh xÃ¡c!</div>
            <div class="password-hint">ğŸ’¡ LiÃªn há»‡ admin náº¿u báº¡n quÃªn máº­t kháº©u</div>
          </div>
          
          <div class="delete-modal-buttons">
            <button class="delete-modal-btn cancel" onclick="closeDeleteModal()">
              âŒ Há»§y bá»
            </button>
            <button class="delete-modal-btn confirm" id="confirmDeleteBtn" onclick="verifyPasswordAndDelete()" disabled>
              ğŸ—‘ï¸ XÃ³a ngay
            </button>
          </div>
        </div>
      `;
      
      document.body.appendChild(confirmModal);
      
      // Focus vÃ o input máº­t kháº©u
      const passwordInput = document.getElementById('deletePassword');
      setTimeout(() => passwordInput.focus(), 100);
      
      // Xá»­ lÃ½ sá»± kiá»‡n input
      passwordInput.addEventListener('input', function() {
        const confirmBtn = document.getElementById('confirmDeleteBtn');
        const errorDiv = document.getElementById('passwordError');
        
        // Enable/disable nÃºt xÃ¡c nháº­n
        confirmBtn.disabled = this.value.trim().length === 0;
        
        // áº¨n lá»—i khi ngÆ°á»i dÃ¹ng gÃµ
        errorDiv.style.display = 'none';
        this.classList.remove('password-shake');
      });
      
      // Xá»­ lÃ½ Enter key
      passwordInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter' && !document.getElementById('confirmDeleteBtn').disabled) {
          verifyPasswordAndDelete();
        }
      });
    }

    // ===== Há»† THá»NG Máº¬T KHáº¨U Báº¢O Máº¬T =====
    
    // ğŸ” THAY Äá»”I Máº¬T KHáº¨U Táº I ÄÃ‚Y
    const ADMIN_PASSWORD = "admin123"; // Äá»•i máº­t kháº©u nÃ y thÃ nh máº­t kháº©u báº¡n muá»‘n
    
    function closeDeleteModal() {
      const confirmModal = document.querySelector('.delete-confirmation');
      if (confirmModal) confirmModal.remove();
    }
    
    function verifyPasswordAndDelete() {
      const passwordInput = document.getElementById('deletePassword');
      const errorDiv = document.getElementById('passwordError');
      const enteredPassword = passwordInput.value.trim();
      
      if (enteredPassword === ADMIN_PASSWORD) {
        // Máº­t kháº©u Ä‘Ãºng - thá»±c hiá»‡n xÃ³a
        confirmDeleteMessages();
      } else {
        // Máº­t kháº©u sai - hiá»ƒn thá»‹ lá»—i
        errorDiv.style.display = 'block';
        passwordInput.classList.add('password-shake');
        passwordInput.value = '';
        passwordInput.focus();
        
        // Tá»± Ä‘á»™ng áº©n lá»—i sau 3 giÃ¢y
        setTimeout(() => {
          errorDiv.style.display = 'none';
          passwordInput.classList.remove('password-shake');
        }, 3000);
      }
    }

    async function confirmDeleteMessages() {
      const confirmModal = document.querySelector('.delete-confirmation');
      if (confirmModal) confirmModal.remove();
      
      const selectedIds = Array.from(selectedMessages);
      let deletedCount = 0;
      
      try {
        // XÃ³a tá»« Firebase náº¿u cÃ³ káº¿t ná»‘i
        if (isFirebaseConnected && database) {
          for (const messageId of selectedIds) {
            const message = allMessages.find(msg => (msg.id || msg.timestamp) === messageId);
            if (message && message.id) {
              try {
                await database.ref(`messages/${message.id}`).remove();
                deletedCount++;
              } catch (error) {
                console.error('Lá»—i xÃ³a tá»« Firebase:', error);
              }
            }
          }
        }
        
        // XÃ³a tá»« localStorage
        allMessages = allMessages.filter(msg => !selectedMessages.has(msg.id || msg.timestamp));
        saveMessagesToLocalStorage(allMessages);
        
        // Cáº­p nháº­t giao diá»‡n
        selectedMessages.clear();
        renderMessages(allMessages);
        updateSelectionButtons();
        
        showNotification(`âœ… ÄÃ£ xÃ³a ${selectedIds.length} lá»i chÃºc thÃ nh cÃ´ng!`, 'success');
        
      } catch (error) {
        console.error('Lá»—i xÃ³a lá»i chÃºc:', error);
        showNotification('âŒ CÃ³ lá»—i xáº£y ra khi xÃ³a lá»i chÃºc!', 'error');
      }
    }

    // ===== Há»† THá»NG XUáº¤T Dá»® LIá»†U Ká»¶ NIá»†M =====
    
    function showExportModal(messages = null) {
      const dataToExport = messages || allMessages;
      
      if (dataToExport.length === 0) {
        showNotification('KhÃ´ng cÃ³ dá»¯ liá»‡u Ä‘á»ƒ xuáº¥t!', 'warning');
        return;
      }

      const exportModal = document.createElement('div');
      exportModal.className = 'export-modal-overlay';
      exportModal.innerHTML = `
        <div class="export-modal">
          <div class="export-modal-header">
            <h2>ğŸ“š Táº¡o Sá»• Ká»· Niá»‡m Lá»i ChÃºc</h2>
            <p>Chá»n Ä‘á»‹nh dáº¡ng xuáº¥t Ä‘á»ƒ lÆ°u giá»¯ nhá»¯ng lá»i chÃºc Ã½ nghÄ©a</p>
          </div>
          
          <div class="export-options">
            <div class="export-option" onclick="exportMemoryBook(${JSON.stringify(dataToExport).replace(/"/g, '&quot;')}, 'html')">
              <div class="export-icon">ğŸ¨</div>
              <h3>Sá»• Ká»· Niá»‡m HTML</h3>
              <p>Trang web Ä‘áº¹p máº¯t vá»›i thiáº¿t káº¿ sang trá»ng, cÃ³ thá»ƒ má»Ÿ báº±ng trÃ¬nh duyá»‡t</p>
              <div class="export-features">
                âœ¨ Thiáº¿t káº¿ chuyÃªn nghiá»‡p<br>
                ğŸ¯ Dá»… chia sáº» vÃ  xem<br>
                ğŸ“± TÆ°Æ¡ng thÃ­ch má»i thiáº¿t bá»‹
              </div>
            </div>
            
            <div class="export-option" onclick="exportMemoryBook(${JSON.stringify(dataToExport).replace(/"/g, '&quot;')}, 'pdf')">
              <div class="export-icon">ğŸ“„</div>
              <h3>Sá»• Ká»· Niá»‡m PDF</h3>
              <p>TÃ i liá»‡u PDF chuyÃªn nghiá»‡p, dá»… in áº¥n vÃ  lÆ°u trá»¯ lÃ¢u dÃ i</p>
              <div class="export-features">
                ğŸ–¨ï¸ Sáºµn sÃ ng in áº¥n<br>
                ğŸ’¾ LÆ°u trá»¯ lÃ¢u dÃ i<br>
                ğŸ“‹ Äá»‹nh dáº¡ng chuáº©n
              </div>
            </div>
            
            <div class="export-option" onclick="exportMemoryBook(${JSON.stringify(dataToExport).replace(/"/g, '&quot;')}, 'excel')">
              <div class="export-icon">ğŸ“Š</div>
              <h3>Báº£ng Dá»¯ Liá»‡u Excel</h3>
              <p>File Excel vá»›i Ä‘á»‹nh dáº¡ng Ä‘áº¹p, dá»… chá»‰nh sá»­a vÃ  phÃ¢n tÃ­ch</p>
              <div class="export-features">
                ğŸ“ˆ Dá»… phÃ¢n tÃ­ch dá»¯ liá»‡u<br>
                âœï¸ CÃ³ thá»ƒ chá»‰nh sá»­a<br>
                ğŸ”¢ Thá»‘ng kÃª chi tiáº¿t
              </div>
            </div>
          </div>
          
          <div class="export-stats">
            <div class="stat-item">
              <span class="stat-number">${dataToExport.length}</span>
              <span class="stat-label">Lá»i chÃºc</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">${new Set(dataToExport.map(m => m.author)).size}</span>
              <span class="stat-label">NgÆ°á»i gá»­i</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">${Math.ceil(dataToExport.reduce((sum, m) => sum + m.message.length, 0) / dataToExport.length)}</span>
              <span class="stat-label">Tá»« TB/lá»i chÃºc</span>
            </div>
          </div>
          
          <div class="export-modal-footer">
            <button class="export-close-btn" onclick="closeExportModal()">
              âŒ ÄÃ³ng
            </button>
          </div>
        </div>
      `;
      
      document.body.appendChild(exportModal);
    }

    function closeExportModal() {
      const modal = document.querySelector('.export-modal-overlay');
      if (modal) modal.remove();
    }

    function exportMemoryBook(messages, format) {
      closeExportModal();
      
      const timestamp = new Date().toLocaleDateString('vi-VN');
      const examDate = new Date(2025, 5, 26); // 26/6/2025
      const totalMessages = messages.length;
      const uniqueAuthors = new Set(messages.map(m => m.author)).size;
      
      switch (format) {
        case 'html':
          exportHTMLMemoryBook(messages, timestamp, examDate, totalMessages, uniqueAuthors);
          break;
        case 'pdf':
          exportPDFMemoryBook(messages, timestamp, examDate, totalMessages, uniqueAuthors);
          break;
        case 'excel':
          exportExcelMemoryBook(messages, timestamp, examDate, totalMessages, uniqueAuthors);
          break;
      }
    }

    function exportHTMLMemoryBook(messages, timestamp, examDate, totalMessages, uniqueAuthors) {
      const htmlContent = `<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sá»• Ká»· Niá»‡m - Lá»i ChÃºc THPT Quá»‘c Gia 2025 12A1</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
       font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.7;
      color: #E5E7EB;
      background: linear-gradient(135deg, #111315 0%, #1D2125 100%);
      min-height: 100vh;
      overflow-x: hidden;
    }
    /* Animated Background */
    .animated-bg {
      background: linear-gradient(135deg, #111315 0%, #1D2125 100%);
      background-size: 400% 400%;
      animation: gradientShift 15s ease-in-out infinite;
      min-height: 100vh;
      position: relative;
    }

    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    /* Floating particles */
    .particles {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .particle {
      position: absolute;
      width: 2px;
      height: 2px;
      background: #9CA3AF;
      border-radius: 50%;
      opacity: 0.6;
      animation: float 20s linear infinite;
    }

    @keyframes float {
      0% {
        transform: translateY(100vh) translateX(0px);
        opacity: 0;
      }
      10% {
        opacity: 0.6;
      }
      90% {
        opacity: 0.6;
      }
      100% {
        transform: translateY(-100px) translateX(100px);
        opacity: 0;
      }
    }
    
    .memory-book {
      max-width: 1000px;
      margin: 0 auto;
      position: relative;
      z-index: 2;
    }
    
    /* Glass morphism */
    .glass {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 24px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }
    
    .cover {
      background: linear-gradient(135deg, #9CA3AF 0%, #6B7280 100%);
      color: white;
      padding: 4rem 2rem;
      text-align: center;
      position: relative;
      border-radius: 24px;
      margin: 2rem;
      overflow: hidden;
    }
    
    .cover::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/><circle cx="20" cy="80" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
      opacity: 0.3;
    }
    
    .cover h1 {
      font-size: clamp(2rem, 5vw, 3.5rem);
      font-weight: 800;
      margin-bottom: 1rem;
      text-shadow: 0 0 30px rgba(156, 163, 175, 0.5);
      position: relative;
      z-index: 1;
      letter-spacing: 2px;
    }
    
    .cover .subtitle {
      font-size: clamp(1rem, 2.5vw, 1.4rem);
      opacity: 0.9;
      margin-bottom: 2rem;
      position: relative;
      z-index: 1;
      font-weight: 300;
    }
    
    .cover .class-info {
      background: rgba(255,255,255,0.15);
      padding: 1.5rem 2.5rem;
      border-radius: 25px;
      display: inline-block;
      backdrop-filter: blur(15px);
      position: relative;
      z-index: 1;
      border: 1px solid rgba(255,255,255,0.2);
      font-weight: 600;
    }
    
    .stats-section {
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 24px;
      padding: 2.5rem 2rem;
      margin: 2rem;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      text-align: center;
    }
    
    .stat-card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      padding: 2rem 1.5rem;
      border-radius: 16px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, #9CA3AF, #D1D5DB);
    }
    
    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(156, 163, 175, 0.2);
      border-color: #9CA3AF;
    }
    
    .stat-number {
      font-size: 2.5rem;
      font-weight: 700;
      color: #9CA3AF;
      display: block;
      text-shadow: 0 0 20px rgba(156, 163, 175, 0.3);
      margin-bottom: 0.5rem;
    }
    
    .stat-label {
      color: #D1D5DB;
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      font-weight: 500;
    }
    
    .content {
      padding: 2rem;
    }
    
    .intro {
      text-align: center;
      margin-bottom: 3rem;
      padding: 2.5rem;
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
    }
    
    .intro h2 {
      font-size: clamp(1.5rem, 3vw, 2rem);
      margin-bottom: 1.5rem;
      color: #9CA3AF;
      font-weight: 700;
      text-shadow: 0 0 15px rgba(156, 163, 175, 0.3);
    }
    
    .intro p {
      color: #E5E7EB;
      line-height: 1.8;
      margin-bottom: 1rem;
      font-size: 1.1rem;
    }
    
    .intro p strong {
      color: #D1D5DB;
      font-weight: 600;
    }
    
    .messages-grid {
      display: grid;
      gap: 2rem;
    }
    
    .message-card {
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      padding: 2rem;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      position: relative;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      overflow: hidden;
    }
    
    .message-card:hover {
      transform: translateY(-8px) scale(1.02);
      border-color: #9CA3AF;
      box-shadow: 0 25px 60px rgba(156, 163, 175, 0.2);
      background: rgba(255, 255, 255, 0.06);
    }
    
    .message-card::before {
      content: 'ğŸ’¬';
      position: absolute;
      top: 1rem;
      right: 1rem;
      font-size: 1.5rem;
      opacity: 0.6;
    }
    
    .message-card::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transition: left 0.8s ease;
    }
    
    .message-card:hover::after {
      left: 100%;
    }
    
    .message-text {
      font-size: 1.1rem;
      line-height: 1.8;
      margin-bottom: 1.5rem;
      font-style: italic;
      color: #E5E7EB;
      position: relative;
      padding: 0.5rem 1rem;
      margin: 0.5rem 0 1.5rem 0;
    }
    
    .message-text::before {
      content: '"';
      font-size: 2.5rem;
      color: #9CA3AF;
      position: absolute;
      top: -0.5rem;
      left: -0.5rem;
      opacity: 0.7;
      z-index: -1;
    }
    
    .message-text::after {
      content: '"';
      font-size: 2.5rem;
      color: #9CA3AF;
      position: absolute;
      bottom: -1rem;
      right: 0rem;
      opacity: 0.7;
      z-index: -1;
    }
    
    .message-author {
      color: #9CA3AF;
      font-weight: 600;
      font-size: 1rem;
      text-align: right;
    }
    
    .message-time {
      color: #6B7280;
      font-size: 0.85rem;
      margin-top: 0.5rem;
      text-align: right;
    }
    
    .footer {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      color: #E5E7EB;
      padding: 2.5rem 2rem;
      text-align: center;
      margin: 2rem;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
    }
    
    .footer h3 {
      margin-bottom: 1.5rem;
      color: #9CA3AF;
      font-size: 1.5rem;
      font-weight: 700;
      text-shadow: 0 0 15px rgba(156, 163, 175, 0.3);
    }
    
    .footer p {
      opacity: 0.9;
      line-height: 1.7;
      margin-bottom: 1rem;
      font-size: 1.05rem;
    }
    
    .footer .quote {
      font-style: italic;
      color: #D1D5DB;
      font-weight: 500;
      font-size: 1.1rem;
      margin: 1.5rem 0;
      padding: 1rem;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 12px;
      border-left: 3px solid #9CA3AF;
    }
    
    .footer .credits {
      font-size: 0.9rem;
      opacity: 0.7;
      margin-top: 2rem;
      color: #9CA3AF;
    }
    
    @media print {
      body { 
        background: white !important;
        color: #333 !important;
      }
      .animated-bg { background: white !important; }
      .memory-book { box-shadow: none; }
      .message-card { 
        break-inside: avoid;
        background: white !important;
        border: 1px solid #ddd !important;
        color: #333 !important;
      }
      .glass, .stat-card, .intro, .footer {
        background: white !important;
        border: 1px solid #ddd !important;
        color: #333 !important;
      }
      .cover {
        background: #667eea !important;
        color: white !important;
      }
      .particles { display: none; }
    }
    
    @media (max-width: 768px) {
      .cover { 
        padding: 2rem 1rem; 
        margin: 1rem;
      }
      .content { 
        padding: 1rem; 
      }
      .stats-section {
        margin: 1rem;
        padding: 1.5rem 1rem;
      }
      .stats-grid { 
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
      }
      .stat-card {
        padding: 1.5rem 1rem;
      }
      .stat-number {
        font-size: 2rem;
      }
      .intro {
        padding: 1.5rem;
      }
      .message-card {
        padding: 1.5rem;
      }
      .footer {
        margin: 1rem;
        padding: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <div class="memory-book">
    <!-- BÃ¬a sá»• ká»· niá»‡m -->
    <div class="cover">
      <h1>ğŸ“š Sá»” Ká»¶ NIá»†M</h1>
      <div class="subtitle">Lá»i ChÃºc Thi THPT Quá»‘c Gia 2025</div>
      <div class="class-info">
        <strong>ğŸ“ Lá»šP 12A1</strong><br>
        Xuáº¥t ngÃ y: ${timestamp}
      </div>
    </div>

    <!-- Thá»‘ng kÃª -->
    <div class="stats-section">
      <div class="stats-grid">
        <div class="stat-card">
          <span class="stat-number">${totalMessages}</span>
          <span class="stat-label">Lá»i chÃºc</span>
        </div>
        <div class="stat-card">
          <span class="stat-number">${uniqueAuthors}</span>
          <span class="stat-label">NgÆ°á»i gá»­i</span>
        </div>
        <div class="stat-card">
          <span class="stat-number">${Math.ceil(messages.reduce((sum, m) => sum + m.message.length, 0) / messages.length)}</span>
          <span class="stat-label">Tá»« TB/lá»i chÃºc</span>
        </div>
        <div class="stat-card">
          <span class="stat-number">26/6/2025</span>
          <span class="stat-label">NgÃ y thi</span>
        </div>
      </div>
    </div>

    <!-- Ná»™i dung -->
    <div class="content">
      <div class="intro">
        <h2>ğŸ’« Lá»i Ngá»</h2>
        <p>ÄÃ¢y lÃ  táº­p há»£p nhá»¯ng lá»i chÃºc chÃ¢n thÃ nh vÃ  Ã½ nghÄ©a nháº¥t Ä‘Æ°á»£c gá»­i Ä‘áº¿n cÃ¡c sÄ© tá»­ lá»›p 12A1 
        trong hÃ nh trÃ¬nh chuáº©n bá»‹ cho ká»³ thi THPT Quá»‘c Gia 2025. Má»—i lá»i chÃºc Ä‘á»u mang trong mÃ¬nh 
        tÃ¬nh yÃªu thÆ°Æ¡ng, sá»± Ä‘á»™ng viÃªn vÃ  niá»m tin vÃ o thÃ nh cÃ´ng cá»§a cÃ¡c em.</p>
        <p><strong>HÃ£y giá»¯ nhá»¯ng lá»i chÃºc nÃ y nhÆ° nguá»“n Ä‘á»™ng lá»±c Ä‘á»ƒ vÆ°á»£t qua má»i thá»­ thÃ¡ch!</strong></p>
      </div>

      <div class="messages-grid">
        ${messages.map((msg, index) => {
          const date = new Date(msg.timestamp);
          return `
            <div class="message-card">
              <div class="message-text">${msg.message}</div>
              <div class="message-author">â€” ${msg.author}</div>
              <div class="message-time">${date.toLocaleDateString('vi-VN')} lÃºc ${date.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' })}</div>
            </div>
          `;
        }).join('')}
      </div>
    </div>

    <!-- ChÃ¢n trang -->
    <div class="footer">
      <h3>ğŸŒŸ Lá»i Káº¿t</h3>
      <p>Nhá»¯ng lá»i chÃºc nÃ y sáº½ mÃ£i lÃ  ká»· niá»‡m Ä‘áº¹p cá»§a thá»i há»c sinh. 
      DÃ¹ thá»i gian cÃ³ trÃ´i qua, tÃ¬nh cáº£m vÃ  sá»± Ä‘á»™ng viÃªn nÃ y sáº½ luÃ´n Ä‘á»“ng hÃ nh cÃ¹ng cÃ¡c báº¡n 
      trÃªn con Ä‘Æ°á»ng chinh phá»¥c Æ°á»›c mÆ¡.</p>
      <p style="margin-top: 1rem; font-style: italic;">
        "ThÃ nh cÃ´ng khÃ´ng pháº£i lÃ  Ä‘Ã­ch Ä‘áº¿n, mÃ  lÃ  hÃ nh trÃ¬nh. HÃ£y táº­n hÆ°á»Ÿng tá»«ng bÆ°á»›c Ä‘i!"
      </p>
      <p style="margin-top: 2rem; font-size: 0.9rem; opacity: 0.7;">
        ÄÆ°á»£c táº¡o bá»Ÿi Há»‡ thá»‘ng Äáº¿m ngÆ°á»£c THPT Quá»‘c Gia 2025 - Lá»›p 12A1
      </p>
    </div>
  </div>
</body>
</html>`;

      const blob = new Blob([htmlContent], { type: 'text/html;charset=utf-8' });
      const link = document.createElement('a');
      const url = URL.createObjectURL(blob);
      link.href = url;
      link.download = `So-Ky-Niem-Loi-Chuc-12A1-${new Date().toISOString().slice(0, 10)}.html`;
      link.click();
      URL.revokeObjectURL(url);
      
      showNotification('ğŸ¨ ÄÃ£ táº¡o Sá»• Ká»· Niá»‡m HTML thÃ nh cÃ´ng!', 'success');
    }

    function exportPDFMemoryBook(messages, timestamp, examDate, totalMessages, uniqueAuthors) {
      // Táº¡o ná»™i dung HTML Ä‘á»ƒ chuyá»ƒn thÃ nh PDF
      const printContent = `
        <div style="font-family: Georgia, serif; max-width: 800px; margin: 0 auto; padding: 20px;">
          <div style="text-align: center; margin-bottom: 40px; padding: 30px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border-radius: 15px;">
            <h1 style="font-size: 2.5rem; margin-bottom: 10px;">ğŸ“š Sá»” Ká»¶ NIá»†M</h1>
            <h2 style="font-size: 1.5rem; margin-bottom: 20px;">Lá»i ChÃºc Thi THPT Quá»‘c Gia 2025</h2>
            <p style="font-size: 1.2rem;"><strong>ğŸ“ Lá»šP 12A1</strong></p>
            <p>Xuáº¥t ngÃ y: ${timestamp}</p>
          </div>
          
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 40px;">
            <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 10px;">
              <h3 style="color: #667eea; font-size: 2rem; margin-bottom: 5px;">${totalMessages}</h3>
              <p style="color: #6c757d;">Lá»i chÃºc</p>
            </div>
            <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 10px;">
              <h3 style="color: #667eea; font-size: 2rem; margin-bottom: 5px;">${uniqueAuthors}</h3>
              <p style="color: #6c757d;">NgÆ°á»i gá»­i</p>
            </div>
          </div>
          
          ${messages.map((msg, index) => {
            const date = new Date(msg.timestamp);
            return `
              <div style="margin-bottom: 30px; padding: 25px; border: 1px solid #e9ecef; border-radius: 15px; background: white; box-shadow: 0 5px 15px rgba(0,0,0,0.1); page-break-inside: avoid;">
                <p style="font-size: 1.1rem; line-height: 1.8; font-style: italic; margin-bottom: 15px; color: #2c3e50;">"${msg.message}"</p>
                <div style="text-align: right;">
                  <p style="font-weight: bold; color: #667eea; margin-bottom: 5px;">â€” ${msg.author}</p>
                  <p style="color: #6c757d; font-size: 0.9rem;">${date.toLocaleDateString('vi-VN')} lÃºc ${date.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' })}</p>
                </div>
              </div>
            `;
          }).join('')}
          
          <div style="text-align: center; margin-top: 40px; padding: 30px; background: #2c3e50; color: white; border-radius: 15px;">
            <h3 style="margin-bottom: 15px;">ğŸŒŸ Lá»i Káº¿t</h3>
            <p style="line-height: 1.6;">Nhá»¯ng lá»i chÃºc nÃ y sáº½ mÃ£i lÃ  ká»· niá»‡m Ä‘áº¹p cá»§a thá»i há»c sinh. DÃ¹ thá»i gian cÃ³ trÃ´i qua, tÃ¬nh cáº£m vÃ  sá»± Ä‘á»™ng viÃªn nÃ y sáº½ luÃ´n Ä‘á»“ng hÃ nh cÃ¹ng cÃ¡c báº¡n trÃªn con Ä‘Æ°á»ng chinh phá»¥c Æ°á»›c mÆ¡.</p>
            <p style="margin-top: 15px; font-style: italic;">"ThÃ nh cÃ´ng khÃ´ng pháº£i lÃ  Ä‘Ã­ch Ä‘áº¿n, mÃ  lÃ  hÃ nh trÃ¬nh. HÃ£y táº­n hÆ°á»Ÿng tá»«ng bÆ°á»›c Ä‘i!"</p>
          </div>
        </div>
      `;
      
      // Má»Ÿ cá»­a sá»• in
      const printWindow = window.open('', '_blank');
      printWindow.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Sá»• Ká»· Niá»‡m - Lá»i ChÃºc THPT 2025</title>
          <style>
            @media print {
              body { margin: 0; }
              * { -webkit-print-color-adjust: exact; }
            }
          </style>
        </head>
        <body>${printContent}</body>
        </html>
      `);
      printWindow.document.close();
      printWindow.focus();
      
      setTimeout(() => {
        printWindow.print();
        showNotification('ğŸ“„ ÄÃ£ má»Ÿ cá»­a sá»• in PDF! Chá»n "LÆ°u thÃ nh PDF" trong tÃ¹y chá»n in.', 'success');
      }, 500);
    }

    function exportExcelMemoryBook(messages, timestamp, examDate, totalMessages, uniqueAuthors) {
      // Táº¡o dá»¯ liá»‡u Excel vá»›i Ä‘á»‹nh dáº¡ng Ä‘áº¹p
      const csvData = [
        ['Sá»” Ká»¶ NIá»†M - Lá»œI CHÃšC THI THPT QUá»C GIA 2025'],
        ['Lá»›p 12A1 - Xuáº¥t ngÃ y: ' + timestamp],
        [''],
        ['THá»NG KÃŠ Tá»”NG QUAN'],
        ['Tá»•ng sá»‘ lá»i chÃºc:', totalMessages],
        ['Sá»‘ ngÆ°á»i gá»­i:', uniqueAuthors],
        ['Trung bÃ¬nh tá»«/lá»i chÃºc:', Math.ceil(messages.reduce((sum, m) => sum + m.message.length, 0) / messages.length)],
        ['NgÃ y thi THPT:', '26/6/2025'],
        [''],
        ['CHI TIáº¾T CÃC Lá»œI CHÃšC'],
        ['STT', 'NgÆ°á»i gá»­i', 'Ná»™i dung lá»i chÃºc', 'NgÃ y gá»­i', 'Giá» gá»­i', 'Äá»™ dÃ i (tá»«)'],
        ...messages.map((msg, index) => {
          const date = new Date(msg.timestamp);
          return [
            index + 1,
            msg.author,
            `"${msg.message.replace(/"/g, '""')}"`,
            date.toLocaleDateString('vi-VN'),
            date.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' }),
            msg.message.length
          ];
        }),
        [''],
        ['Lá»œI Káº¾T'],
        ['Nhá»¯ng lá»i chÃºc nÃ y sáº½ mÃ£i lÃ  ká»· niá»‡m Ä‘áº¹p cá»§a thá»i há»c sinh.'],
        ['DÃ¹ thá»i gian cÃ³ trÃ´i qua, tÃ¬nh cáº£m vÃ  sá»± Ä‘á»™ng viÃªn nÃ y'],
        ['sáº½ luÃ´n Ä‘á»“ng hÃ nh cÃ¹ng cÃ¡c báº¡n trÃªn con Ä‘Æ°á»ng chinh phá»¥c Æ°á»›c mÆ¡.'],
        [''],
        ['"ThÃ nh cÃ´ng khÃ´ng pháº£i lÃ  Ä‘Ã­ch Ä‘áº¿n, mÃ  lÃ  hÃ nh trÃ¬nh."'],
        [''],
        ['ÄÆ°á»£c táº¡o bá»Ÿi Há»‡ thá»‘ng Äáº¿m ngÆ°á»£c THPT Quá»‘c Gia 2025']
      ];

      // Chuyá»ƒn Ä‘á»•i thÃ nh CSV vá»›i BOM
      const csvString = csvData.map(row => row.join(',')).join('\n');
      const BOM = '\uFEFF';
      const csvWithBOM = BOM + csvString;
      
      const blob = new Blob([csvWithBOM], { type: 'text/csv;charset=utf-8;' });
      const link = document.createElement('a');
      const url = URL.createObjectURL(blob);
      link.href = url;
      link.download = `So-Ky-Niem-Excel-12A1-${new Date().toISOString().slice(0, 10)}.csv`;
      link.click();
      URL.revokeObjectURL(url);
      
      showNotification('ğŸ“Š ÄÃ£ táº¡o Sá»• Ká»· Niá»‡m Excel thÃ nh cÃ´ng!', 'success');
    }

    function exportSelectedMessages() {
      if (selectedMessages.size === 0) {
        showNotification('Vui lÃ²ng chá»n Ã­t nháº¥t má»™t lá»i chÃºc Ä‘á»ƒ xuáº¥t!', 'warning');
        return;
      }
      
      const selectedData = allMessages.filter(msg => 
        selectedMessages.has(msg.id || msg.timestamp)
      );
      
      showExportModal(selectedData);
    }

    function exportAllMessages() {
      showExportModal(allMessages);
    }

    // ===== KHá»I Táº O á»¨NG Dá»¤NG =====
    async function init() {
      // Táº£i dá»¯ liá»‡u tá»« localStorage trÆ°á»›c
      allMessages = loadMessagesFromLocalStorage();
      pendingMessages = loadPendingMessages();
      renderMessages(allMessages);
      
      // Khá»Ÿi táº¡o Firebase (báº¥t Ä‘á»“ng bá»™)
      initFirebase();
      
      // Táº¡o particles
      createParticles();
      
      // Thiáº¿t láº­p Ä‘áº¿m ngÆ°á»£c
      updateCountdown();
      setInterval(updateCountdown, 1000);
      
      // Thiáº¿t láº­p theme switcher
      document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          switchTheme(btn.dataset.theme);
        });
      });

      setTimeout(() => {
        if (!userInteracted) {
          startAutoTheme();
        }
      }, 5000);
      
      // Thiáº¿t láº­p form
      document.getElementById('messageForm').addEventListener('submit', handleFormSubmit);
      document.getElementById('anonymousCheck').addEventListener('change', handleAnonymousToggle);
      
      // Thiáº¿t láº­p admin controls
      document.getElementById('toggleAdminBtn').addEventListener('click', toggleAdminMode);
      document.getElementById('exportBtn').addEventListener('click', exportAllMessages);
      document.getElementById('selectAllBtn').addEventListener('click', selectAllMessages);
      document.getElementById('deselectAllBtn').addEventListener('click', deselectAllMessages);
      document.getElementById('deleteSelectedBtn').addEventListener('click', deleteSelectedMessages);
      document.getElementById('exportSelectedBtn').addEventListener('click', exportSelectedMessages);
      
      // Thiáº¿t láº­p search vÃ  sort
      document.getElementById('searchInput').addEventListener('input', () => {
        renderMessages(allMessages);
      });
      document.getElementById('sortSelect').addEventListener('change', () => {
        renderMessages(allMessages);
      });
      
      // Thiáº¿t láº­p scroll reveal
      initScrollReveal();
      
      // Hiá»ƒn thá»‹ tráº¡ng thÃ¡i káº¿t ná»‘i ban Ä‘áº§u
      updateConnectionStatus();
    }
    createParticles();
    createMessageParticles();



    document.addEventListener('DOMContentLoaded', init);
  </script>
  </html>